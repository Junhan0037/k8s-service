global:
  scrape_interval: 15s
  evaluation_interval: 15s

# Prometheus가 자체 및 핵심 인프라 서비스의 메트릭을 수집하도록 설정한다.
scrape_configs:
  - job_name: "prometheus"
    static_configs:
      - targets: ["prometheus:9090"]

  - job_name: "zipkin"
    metrics_path: "/actuator/prometheus"
    static_configs:
      - targets: ["zipkin:9411"]

  - job_name: "researchex-services"
    metrics_path: "/actuator/prometheus"
    static_configs:
      # 각 서비스 컨테이너는 동일한 브릿지 네트워크 상에서 고유 이름으로 스크레이프된다.
      - targets:
          - "gateway:8080"
          - "research-service:8101"
          - "registry-service:8102"
          - "mr-viewer-service:8103"
          - "deid-service:8104"
          - "user-portal:8105"
          - "cdw-loader:8106"
